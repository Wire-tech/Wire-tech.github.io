(this["webpackJsonpwire-web"]=this["webpackJsonpwire-web"]||[]).push([[0],{113:function(e,t,a){e.exports=a(148)},118:function(e,t,a){},119:function(e,t,a){},136:function(e,t){},137:function(e,t){},138:function(e,t){},140:function(e,t){},141:function(e,t){},142:function(e,t){},143:function(e,t){},144:function(e,t){},145:function(e,t){},148:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),c=a.n(o),i=(a(118),a(119),a(103)),l=a(69),s=a(194),u=Object(i.a)({palette:{type:"dark",primary:{main:l.a[800]},secondary:s.a}}),m=a(206),h=a(207),g=a(67),d=(a(195),a(197)),p=a(71),b=a(48),f=a.n(b),w=a(74),v=a(43),j=a(199),E=a(10),O=a(198),x=a(200),y=a(201),k=a(210),C=a(203),_=a(202),I=a(204),N=a(205),R=a(211),F=a(149),S=a(102),L=a(42),A=a(0),T=a(68),B=a(98),D=a(99),P=a(105),J=a(34),U=a(106),W=a(104),q=function(e){Object(U.a)(a,e);var t=Object(W.a)(a);function a(e){var n;return Object(B.a)(this,a),(n=t.call(this,e)).value=e.value,n}return Object(D.a)(a,[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"call",value:function(e,t){var a=e;return Array.isArray(a)&&(a=a[0]),this.invokeCallHook(e,t),A.Qb(a,A.pc(this.value))}},{key:"getConfig",value:function(){var e={value:this.value},t=Object(P.a)(Object(J.a)(a.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"className",get:function(){return"HyperScale"}}]),a}(T.a.Layer),G=function(e,t,a){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},H=Object(j.a)((function(e){return{root:{marginTop:e.spacing(3),textAlign:"center",justifyContent:"center",justifyItems:"center"},imageArea:{marginTop:"auto",marginBottom:"auto",position:"relative"},imageContent:{width:"100%"},overlay:{position:"absolute",top:0,left:0,width:"100%"},resultArea:{marginTop:e.spacing(3)},contentArea:{marginTop:e.spacing(3),height:"60%"},resultPaper:{padding:e.spacing(3)},croppedImg:{border:"solid",borderWidth:"2px",marginLeft:"15px"},resultList:{height:"270px",overflow:"auto",position:"relative",backgroundColor:Object(E.c)(e.palette.common.white,.15)},resultGrid:{height:"300px"},listIconText:{color:"white"}}})),M=function(){var e=Object(n.useState)(""),t=Object(v.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),i=Object(v.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(null),m=Object(v.a)(u,2),h=m[0],g=m[1],d=Object(n.useState)(null),b=Object(v.a)(d,2),j=b[0],E=b[1],B=Object(n.useState)([]),D=Object(v.a)(B,2),P=D[0],J=D[1],U=H(),W=Object(n.useRef)(null),M=Object(n.useRef)(null),Q="https://wiretechnology.net",V="https://www.wiretechnology.net";return Object(n.useEffect)((function(){L.d.ssdMobilenetv1.loadFromUri("./models").then((function(e){console.log("model loaded")}))}),[]),Object(n.useEffect)((function(){A.tc.registerClass(q),Object(T.b)("./tf-keras-facenet/model.json").then((function(e){E(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.root},r.a.createElement(x.a,null,r.a.createElement(S.a,{acceptedFiles:["image/jpeg","image/png","image/bmp"],filesLimit:1,onChange:function(e){if(e.length>0){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(){o(t.result)}}else o(""),g("")}}),h&&r.a.createElement("div",{className:U.contentArea},r.a.createElement(F.a,null,r.a.createElement(O.a,{container:!0,spacing:3},r.a.createElement(O.a,{item:!0,xs:4},r.a.createElement("div",{className:U.imageArea},r.a.createElement("img",{src:a,className:U.imageContent,ref:W,onLoad:function(){var e,t=(e=W.current).height,n={width:e.width,height:t};M.current.height=t,L.c(M.current,n),(e=new Image).src=a,e.onload=Object(w.a)(f.a.mark((function t(){var a,r,o,c,i,l,u,m,h;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a(e);case 2:for(a=t.sent,r=L.e(a,n),console.log("detections",a,r),o={boxColor:"rgba(255, 255, 255, 1)",label:"Click",drawLabelOptions:{fontColor:"rgba(200, 200, 200, 1)"}},c=[],i=0;i<a.length;i++)l=a[i],u=r[i],m={x:u._box._x,y:u._box._y,width:u._box._width,height:u._box._height},h={x:l._box._x,y:l._box._y,width:l._box._width,height:l._box._height},c.push({box:m,org_box:h}),new L.b.DrawBox(m,o).draw(M.current);s(c);case 9:case"end":return t.stop()}}),t)})))}}),r.a.createElement("canvas",{className:U.overlay,ref:M,onClick:function(e){for(var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,r=0;r<l.length;r++){var o=l[r];if(G(a,n,o.box)){var c=W.current,i=o.org_box,s=document.createElement("canvas");s.height=i.height,s.width=i.width,s.getContext("2d").drawImage(c,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var u=s.toDataURL();g(u);var m=new Image;m.src=u,m.width=160,m.height=160,m.onload=Object(w.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(A.gd),t=A.y.fromPixels(m),t=(t=A.ab(t,0)).sub(127.5).div(128),e.next=6,j.predict(t);case 6:return a=(a=e.sent).div(A.Vb(a)),e.next=10,a.array();case 10:a=e.sent,n={method:"POST",body:JSON.stringify({vector:a}),headers:{"Content-Type":"application/json; charset=utf-8"}},fetch(Q+"/face",n).then((function(e){return e.json()})).then((function(e){console.log("res_json",e),J(e)}));case 13:case"end":return e.stop()}}),e)})))}}}}))),r.a.createElement(O.a,{item:!0,xs:8,className:U.resultGrid},r.a.createElement(y.a,{className:U.resultList},P.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{key:t,button:!0,component:"a",href:"https://www.wiretechnology.net/index.html?q=".concat(e[0])},r.a.createElement(_.a,null,r.a.createElement(p.a,{className:U.listIconText},t+1,".")),r.a.createElement(C.a,{primary:e[0]}),r.a.createElement(I.a,null,r.a.createElement(R.a,{alt:e[0],src:V+"/image/"+e[2]}))),r.a.createElement(N.a,null))}))))))))))},Q=a(78),V=a(35),X=a(208),Y=a(101),$=a.n(Y),z=Object(j.a)((function(e){return{root:{marginTop:e.spacing(10),width:"100%"},search:Object(Q.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(E.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(E.c)(e.palette.common.white,.25)},marginLeft:"auto",marginRight:"auto",width:"100%"},e.breakpoints.up("sm"),{width:"60%",marginLeft:"auto",marginRight:"auto"}),searchIcon:{width:e.spacing(7),color:"#FFF",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(Q.a)({padding:e.spacing(1,1,1,7),color:"#FFF",width:"100%"},e.breakpoints.up("sm"),{width:"100%"})}}));Object(V.c)()((function(e){e.dispatch;var t,a=z();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(x.a,null,r.a.createElement(d.a,null,r.a.createElement("div",{className:a.search},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.value;t.value="",document.location.href="https://www.wiretechnology.net/index.html?q="+a}},r.a.createElement("div",{className:a.searchIcon},r.a.createElement($.a,null)),r.a.createElement(X.a,{placeholder:"Search...",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},inputRef:function(e){t=e}})))))))}));var K=function(){return r.a.createElement(m.a,{theme:u},r.a.createElement(h.a,null),r.a.createElement(g.c,null,r.a.createElement(g.a,null,r.a.createElement(M,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(26),ee=a(32),te=a(88),ae=a(36),ne=function(e){return Object(ee.c)({router:Object(ae.b)(e)})},re=Object(Z.a)();var oe=Object(ee.e)(ne(re),Object(ee.d)(Object(ee.a)(Object(te.a)(re))));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V.a,{store:oe},r.a.createElement(ae.a,{history:re},r.a.createElement(K,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[113,1,2]]]);
//# sourceMappingURL=main.339e9bc7.chunk.js.map