{"version":3,"sources":["common/theme.js","bar/index.js","utils/HyperScale.js","capture/index.js","search_bar/index.js","App.js","serviceWorker.js","common/reducers.js","common/store.js","index.js"],"names":["theme","createMuiTheme","palette","type","primary","main","grey","secondary","blueGrey","Bar","Fragment","AppBar","Toolbar","Typography","variant","HyperScale","config","value","inputShape","inputs","kwargs","input","Array","isArray","this","invokeCallHook","tf","baseConfig","Object","assign","layers","Layer","onImage","x","y","box","width","height","useStyle","makeStyles","root","marginTop","spacing","textAlign","justifyContent","justifyItems","imageArea","marginBottom","position","imageContent","overlay","top","left","resultArea","contentArea","resultPaper","padding","croppedImg","border","borderWidth","marginLeft","resultList","overflow","backgroundColor","fade","common","white","resultGrid","listIconText","color","Capture","useState","url","setUrl","detections","setDetections","setFaceImgData","facenet","setFacenet","faceList","setFaceList","classes","imageRef","useRef","canvasRef","api_urls","useEffect","faceapi","ssdMobilenetv1","loadFromUri","then","res","console","log","registerClass","loadLayersModel","model","className","Container","acceptedFiles","filesLimit","onChange","files","length","reader","FileReader","readAsDataURL","onload","result","Paper","Grid","container","item","xs","src","ref","onLoad","image","current","displaySize","Image","a","resizedDetections","option","boxColor","label","drawLabelOptions","fontColor","newDetections","i","org_det","det","_box","_x","_y","_width","_height","org_box","push","DrawBox","draw","onClick","e","rect","target","getBoundingClientRect","clientX","clientY","img","copy_cvs","document","createElement","getContext","drawImage","data","toDataURL","input_tensor","fromPixels","sub","div","predict","emb","array","post_data","method","body","JSON","stringify","vector","headers","fetch","json","res_json","List","map","face","index","ListItem","key","button","component","href","ListItemIcon","ListItemText","ListItemSecondaryAction","Avatar","alt","Divider","useStyles","search","borderRadius","shape","marginRight","breakpoints","up","searchIcon","pointerEvents","display","alignItems","inputRoot","inputInput","connect","dispatch","onSubmit","preventDefault","search_text","location","InputBase","placeholder","inputProps","inputRef","node","App","CssBaseline","Boolean","window","hostname","match","createRootReducer","history","combineReducers","router","connectRouter","createBrowserHistory","store","createStore","compose","applyMiddleware","routerMiddleware","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.11f16b6b.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\nimport {lightGreen,blueGrey,grey} from \"@material-ui/core/colors\"\n\n\nexport const theme = createMuiTheme({\n    palette: {\n        type: \"dark\",\n        primary: {\n            main:grey[800]\n        },\n        secondary:blueGrey\n    }\n});","import React, {useState} from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from \"@material-ui/core/Typography\"\n\n\n\n\nconst Bar = ()=>{\n    return (\n        <React.Fragment>\n            <AppBar>\n                <Toolbar>\n                    <Typography variant=\"h4\">\n                        FaceSearch\n                    </Typography>\n                </Toolbar>\n            </AppBar>\n        </React.Fragment>\n    )\n}\n\nexport default Bar","import {layers} from '@tensorflow/tfjs';\nimport * as tf from '@tensorflow/tfjs-core';\n// import {} from '@tensorflow/tfjs-core';\n\n\nclass HyperScale extends layers.Layer{\n    constructor(config){\n        super(config);\n        this.value = config[\"value\"]\n    }\n\n    computeOutputShape(inputShape) {\n        return [inputShape[0], inputShape[1], inputShape[2], inputShape[3]]\n      }\n\n      call(inputs, kwargs) {\n        let input = inputs;\n        if (Array.isArray(input)) {\n          input = input[0];\n        }\n        this.invokeCallHook(inputs, kwargs);\n        var res = tf.mul(input,tf.scalar(this.value))\n        \n        //res.print()\n        return res\n      }\n\n      static get className() {\n        return 'HyperScale';\n      }\n      \n      getConfig(){\n        const config = {\n          value:this.value\n        }\n        const baseConfig = super.getConfig();\n        Object.assign(config, baseConfig);\n        return config;\n      }\n\n}\n\nexport default HyperScale","import React,{useState,useRef, useEffect} from \"react\"\n\nimport { makeStyles,fade} from '@material-ui/core/styles';\n\nimport Grid from \"@material-ui/core/Grid\"\nimport Container from \"@material-ui/core/Container\"\nimport Typography from \"@material-ui/core/Typography\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\"\nimport Divider from \"@material-ui/core/Divider\"\nimport Avatar from \"@material-ui/core/Avatar\"\nimport Paper from \"@material-ui/core/Paper\"\n\nimport {DropzoneArea} from 'material-ui-dropzone'\n\nimport * as faceapi from \"face-api.js\"\nimport * as tf from '@tensorflow/tfjs-core';\n// const tf = require('@tensorflow/tfjs-core')\nimport {loadLayersModel} from \"@tensorflow/tfjs\"\n\nimport HyperScale from \"../utils/HyperScale\"\n\nvar onImage = (x,y,box)=>{\n    return (x>=box.x) && (x<=box.x+box.width) && (y>=box.y) && (y<=box.y+box.height)\n}\n\nconst useStyle = makeStyles(theme=>({\n    root:{\n        marginTop:theme.spacing(3),\n        textAlign:\"center\",\n        justifyContent: \"center\",\n        justifyItems: \"center\"\n    },\n    imageArea:{\n        marginTop:\"auto\",\n        marginBottom:\"auto\",\n        position:\"relative\",\n        //width:\"30%\"\n    },\n    imageContent:{\n        width:\"100%\"\n    },\n    overlay:{\n        position:\"absolute\",\n        top: 0,\n        left: 0,\n        width:\"100%\"\n    },\n    resultArea:{\n        marginTop:theme.spacing(3)\n    },\n    contentArea:{\n        marginTop: theme.spacing(3),\n        height:\"60%\"\n    },\n    resultPaper:{\n        padding:theme.spacing(3)\n    },\n    croppedImg:{\n        border:\"solid\",\n        borderWidth:\"2px\",\n        marginLeft: \"15px\",\n        \n\n    },\n    resultList:{\n        height:\"270px\",\n        overflow: 'auto',\n        position: 'relative',\n        backgroundColor:fade(theme.palette.common.white,0.15),\n    },\n    resultGrid:{\n        height:\"300px\"\n    },\n    listIconText:{\n        color:\"white\"\n    }\n}))\n\nconst Capture = ()=>{\n    const [url,setUrl] = useState(\"\")\n    const [detections,setDetections] = useState([])\n    // const [imgData,setImgData] = useState(null)\n    const [faceImgData,setFaceImgData] = useState(null)\n    const [facenet,setFacenet] = useState(null)\n    const [faceList,setFaceList] = useState([])\n\n    const classes = useStyle()\n    const imageRef = useRef(null);\n    const canvasRef = useRef(null);\n\n    const api_urls = {\n        \"face_api\": \"https://wiretechnology.net\",\n        \"static_api\": \"https://www.wiretechnology.net\"\n    }\n\n    useEffect(()=>{\n        faceapi.nets.ssdMobilenetv1.loadFromUri(\"./models\").then(res=>{\n            console.log(\"model loaded\")\n        })\n    },[])\n\n    useEffect(()=>{\n        tf.serialization.registerClass(HyperScale); \n        loadLayersModel(\"./tf-keras-facenet/model.json\").then(model=>{\n            setFacenet(model)\n        })\n    },[])\n\n    return (\n        <React.Fragment>\n            <div className={classes.root}>\n                <Container>\n                    <DropzoneArea\n                        acceptedFiles={['image/jpeg', 'image/png', 'image/bmp']}\n                        filesLimit={1}\n                        onChange={(files)=>{\n                            if(files.length>0){\n                                var reader = new FileReader()\n                                reader.readAsDataURL(files[0])\n                                reader.onload = ()=>{\n                                    setUrl(reader.result)\n                                }\n\n                            }else{\n                                setUrl(\"\")\n                                setFaceImgData(\"\")\n\n                            }\n                        }}\n                    />\n                    <div className={classes.contentArea}>\n                        <Paper>\n                            <Grid container spacing={3}>\n                                <Grid item xs={4}>\n                                        <div className={classes.imageArea}>\n                                        <img src={url} \n                                            className={classes.imageContent}\n                                            ref={imageRef}\n                                            onLoad={()=>{\n                                                var image = imageRef.current\n                                                var height = image.height\n                                                var width = image.width\n                                                const displaySize = {width,height}\n                                                canvasRef.current.height = height\n                                                faceapi.matchDimensions(canvasRef.current, displaySize)\n                                                var image = new Image()\n                                                image.src = url\n                                                image.onload = async ()=>{\n                                                    var detections = await faceapi.detectAllFaces(image)\n                                                    const resizedDetections = faceapi.resizeResults(detections, displaySize)\n                                                    console.log(\"detections\",detections,resizedDetections)\n\n                                                    var option = {boxColor:\"rgba(255, 255, 255, 1)\",label:\"Click\",drawLabelOptions:{fontColor:\"rgba(200, 200, 200, 1)\"}}\n                                                    const newDetections = []\n                                                    for(var i=0;i<detections.length;i++){\n                                                        var org_det = detections[i]\n                                                        var det = resizedDetections[i]\n                                    \n                                                        const box = { x: det._box._x, y: det._box._y, width:det._box._width, height: det._box._height }\n                                                        const org_box = { x: org_det._box._x, y: org_det._box._y, width:org_det._box._width, height: org_det._box._height }\n                                                        newDetections.push({box,org_box})\n                                                        var drawBox = new faceapi.draw.DrawBox(box,option)\n                                                        drawBox.draw(canvasRef.current);\n                                                    }\n                                                    setDetections(newDetections)\n                                                }\n                                            }}\n                                        />\n                                        <canvas className={classes.overlay} ref={canvasRef} onClick={(e)=>{\n                                            var rect = e.target.getBoundingClientRect();\n                                            var x = e.clientX - rect.left;\n                                            var y = e.clientY - rect.top;\n\n                                            for(var i=0;i<detections.length;i++){\n                                                var det = detections[i]\n                                                if(onImage(x,y,det.box)){\n                                                    var img = imageRef.current\n                                                    var box = det.org_box\n                                                    var copy_cvs = document.createElement(\"canvas\")\n                                                    copy_cvs.height = box.height\n                                                    copy_cvs.width = box.width\n                                                    var copy_ctx = copy_cvs.getContext(\"2d\")\n                                                    copy_ctx.drawImage(img,box.x,box.y,box.width,box.height,0,0,box.width,box.height)\n                                                    var data = copy_cvs.toDataURL();\n                                                    setFaceImgData(data)\n                                                    // dispatch(set_face_img(data))\n                                                    var image = new Image()\n                                                    image.src = data\n                                                    image.width = 160\n                                                    image.height = 160\n                                                    image.onload = async ()=>{\n                                                        console.log(tf.version_core)\n                                                        var input_tensor = tf.browser.fromPixels(image);\n                                                        input_tensor = tf.expandDims(input_tensor,0)\n                                                        input_tensor = input_tensor.sub(127.5).div(128)\n                                                        var emb  = await facenet.predict(input_tensor)\n                                                        emb = emb.div(tf.norm(emb))\n                                                        emb = await emb.array()\n                                                        var post_data = {\n                                                            method:\"POST\",\n                                                            body:JSON.stringify({vector:emb}),\n                                                            headers: {\n                                                                \"Content-Type\": \"application/json; charset=utf-8\",\n                                                            }\n                                                        }\n                                                        fetch(api_urls[\"face_api\"]+\"/face\",post_data).then((res)=>(res.json())).then((res_json)=>{\n                                                            console.log(\"res_json\",res_json)\n                                                            setFaceList(res_json)\n                                                            // dispatch(set_face_list(res_json))\n                                                            // setIsProgress(false)\n                                                            //setProgress(100)\n                                                            //setFaceList(res_json)\n                                                        })\n                                                    }\n                                                }\n                                            }\n                                        }}/>\n                                    </div>\n                                </Grid>\n                                <Grid item xs={8} className={classes.resultGrid}>\n                                    <List className={classes.resultList}>\n                                        {\n                                            faceList.map((face,index)=>(\n                                                <React.Fragment>\n                                                    <ListItem key={index} button component=\"a\" href={`https://www.wiretechnology.net/index.html?q=${face[0]}`}>\n                                                        <ListItemIcon>\n                                                            <Typography className={classes.listIconText}>\n                                                                {index+1}.\n                                                            </Typography>\n                                                        </ListItemIcon>\n                                                        <ListItemText primary={face[0]}/>\n                                                        <ListItemSecondaryAction>\n                                                            <Avatar alt={face[0]} src={api_urls[\"static_api\"]+\"/image/\"+face[2]}/>\n                                                        </ListItemSecondaryAction>\n                                                    </ListItem>\n                                                    <Divider/>\n                                                </React.Fragment>\n                                            ))\n                                        }\n                                    </List>\n                                </Grid>\n                            </Grid>\n                        </Paper>\n                    </div>\n\n\n                    {/* <div className={classes.imageArea}>\n                        <img src={url} \n                            className={classes.imageContent}\n                            ref={imageRef}\n                            onLoad={()=>{\n                                var image = imageRef.current\n                                var height = image.height\n                                var width = image.width\n                                const displaySize = {width,height}\n                                canvasRef.current.height = height\n                                faceapi.matchDimensions(canvasRef.current, displaySize)\n                                var image = new Image()\n                                image.src = url\n                                image.onload = async ()=>{\n                                    var detections = await faceapi.detectAllFaces(image)\n                                    const resizedDetections = faceapi.resizeResults(detections, displaySize)\n                                    console.log(\"detections\",detections,resizedDetections)\n\n                                    var option = {boxColor:\"rgba(255, 255, 255, 1)\",label:\"Click\",drawLabelOptions:{fontColor:\"rgba(200, 200, 200, 1)\"}}\n                                    const newDetections = []\n                                    for(var i=0;i<detections.length;i++){\n                                        var org_det = detections[i]\n                                        var det = resizedDetections[i]\n                    \n                                        const box = { x: det._box._x, y: det._box._y, width:det._box._width, height: det._box._height }\n                                        const org_box = { x: org_det._box._x, y: org_det._box._y, width:org_det._box._width, height: org_det._box._height }\n                                        newDetections.push({box,org_box})\n                                        var drawBox = new faceapi.draw.DrawBox(box,option)\n                                        drawBox.draw(canvasRef.current);\n                                    }\n                                    setDetections(newDetections)\n                                }\n                            }}\n                        />\n                        <canvas className={classes.overlay} ref={canvasRef} onClick={(e)=>{\n                            var rect = e.target.getBoundingClientRect();\n                            var x = e.clientX - rect.left;\n                            var y = e.clientY - rect.top;\n\n                            for(var i=0;i<detections.length;i++){\n                                var det = detections[i]\n                                if(onImage(x,y,det.box)){\n                                    var img = imageRef.current\n                                    var box = det.org_box\n                                    var copy_cvs = document.createElement(\"canvas\")\n                                    copy_cvs.height = box.height\n                                    copy_cvs.width = box.width\n                                    var copy_ctx = copy_cvs.getContext(\"2d\")\n                                    copy_ctx.drawImage(img,box.x,box.y,box.width,box.height,0,0,box.width,box.height)\n                                    var data = copy_cvs.toDataURL();\n                                    setFaceImgData(data)\n                                    // dispatch(set_face_img(data))\n                                    var image = new Image()\n                                    image.src = data\n                                    image.width = 160\n                                    image.height = 160\n                                    image.onload = async ()=>{\n                                        console.log(tf.version_core)\n                                        var input_tensor = tf.browser.fromPixels(image);\n                                        input_tensor = tf.expandDims(input_tensor,0)\n                                        input_tensor = input_tensor.sub(127.5).div(128)\n                                        var emb  = await facenet.predict(input_tensor)\n                                        emb = emb.div(tf.norm(emb))\n                                        emb = await emb.array()\n                                        var post_data = {\n                                            method:\"POST\",\n                                            body:JSON.stringify({vector:emb}),\n                                            headers: {\n                                                \"Content-Type\": \"application/json; charset=utf-8\",\n                                            }\n                                        }\n                                        fetch(api_urls[\"face_api\"]+\"/face\",post_data).then((res)=>(res.json())).then((res_json)=>{\n                                            console.log(\"res_json\",res_json)\n                                            setFaceList(res_json)\n                                            // dispatch(set_face_list(res_json))\n                                            // setIsProgress(false)\n                                            //setProgress(100)\n                                            //setFaceList(res_json)\n                                        })\n                                    }\n                                }\n                            }\n                        }}/>\n                    </div> */}\n                    {/* {\n                        faceImgData && (\n                            <div className={classes.resultArea}>\n                                <Paper className={classes.resultPaper}> \n                                <Grid container spacing={3}>\n                                    <Grid item xs={3}>\n                                        <img width={80} height={80} className={classes.croppedImg} src={faceImgData}/>\n                                    </Grid>\n                                    <Grid item xs={9}>\n                                        <List className={classes.resultList}>\n                                            {\n                                                faceList.map((face,index)=>(\n                                                    <React.Fragment>\n                                                        <ListItem key={index} button component=\"a\" href={`https://www.wiretechnology.net/index.html?q=${face[0]}`}>\n                                                            <ListItemIcon>\n                                                                <Typography className={classes.listIconText}>\n                                                                    {index+1}.\n                                                                </Typography>\n                                                            </ListItemIcon>\n                                                            <ListItemText primary={face[0]}/>\n                                                            <ListItemSecondaryAction>\n                                                                <Avatar alt={face[0]} src={api_urls[\"static_api\"]+\"/image/\"+face[2]}/>\n                                                            </ListItemSecondaryAction>\n                                                        </ListItem>\n                                                        <Divider/>\n                                                    </React.Fragment>\n                                                ))\n                                            }\n                                        </List>\n                                    </Grid>\n                                </Grid>\n                                </Paper>\n                            </div>\n                        )\n                    } */}\n                </Container>\n            </div>\n\n        </React.Fragment>\n    )\n}\n\nexport default Capture","import React from 'react';\nimport {connect} from \"react-redux\"\nimport { push } from 'connected-react-router'\n\nimport {makeStyles,fade} from \"@material-ui/core/styles\"\n\nimport Toolbar from '@material-ui/core/Toolbar';\nimport InputBase from '@material-ui/core/InputBase';\nimport Container from \"@material-ui/core/Container\"\n\nimport SearchIcon from '@material-ui/icons/Search';\n\n//import {add_history} from \"../history/actions\"\n\nconst useStyles = makeStyles((theme)=>({\n    root:{\n      marginTop:theme.spacing(10),\n      width:\"100%\"\n    },\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n          backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n          //marginLeft: theme.spacing(1),\n          width: '60%',\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n        },\n      },\n      searchIcon: {\n        width: theme.spacing(7),\n        color: \"#FFF\",\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      inputRoot: {\n        color: 'inherit',\n        width: '100%'\n      },\n      inputInput: {\n        padding: theme.spacing(1, 1, 1, 7),\n        color :\"#FFF\",\n        //transition: theme.transitions.create('width'),\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n          width: \"100%\",\n          /*'&:focus': {\n            width: 200,\n          },*/\n        },\n      },\n}))\n\nconst SearchBar = ({dispatch})=>{\n    const classes = useStyles()\n    let input\n    return (\n        <React.Fragment>\n            <div className={classes.root}>\n              <Container>\n                <Toolbar>\n                    <div className={classes.search}>\n                        <form onSubmit={(e)=>{\n                            e.preventDefault()\n                            const search_text = input.value\n                            input.value = \"\"\n                            //dispatch(add_history(search_text))\n                            //dispatch(push(\"/search/\"+search_text))\n                            document.location.href=\"https://www.wiretechnology.net/index.html?q=\"+search_text\n                        }}>\n                            <div className={classes.searchIcon}>\n                                <SearchIcon/>\n                            </div>\n                            <InputBase\n                                placeholder=\"Search...\"\n                                classes={{\n                                    root:classes.inputRoot,\n                                    input:classes.inputInput\n                                }}\n                                inputProps={{ 'aria-label': 'search' }}\n                                inputRef={(node)=>{input=node}}\n                            />\n                        </form>\n                    </div>\n                </Toolbar>\n                </Container>\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport default connect()(SearchBar) ","import React from 'react';\nimport './App.css';\n\nimport {theme} from \"./common/theme\"\n\nimport { makeStyles, useTheme,MuiThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\n\nimport {Link, Route, Switch,} from \"react-router-dom\";\n\nimport Bar from \"./bar\"\nimport Capture from \"./capture\"\nimport SearchBar from \"./search_bar\"\n\nfunction App() {\n\n  return (\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline/>\n        <Bar/>\n        <SearchBar/>\n        <Switch>\n          <Route>\n            <Capture/>\n          </Route>\n        </Switch>\n      </MuiThemeProvider>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\n\n\nconst createRootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    // setting\n  })\n\nexport default createRootReducer","import { createBrowserHistory } from 'history'\nimport { applyMiddleware, compose, createStore } from 'redux'\nimport { routerMiddleware } from 'connected-react-router'\nimport createRootReducer from './reducers'\n\n\nexport const history = createBrowserHistory()\n\n\n\nexport default function configureStore() {\n    const store = createStore(\n      createRootReducer(history), // root reducer with router state\n      compose(\n        applyMiddleware(\n          routerMiddleware(history), // for dispatching history actions\n          // ... other middlewares ...\n        ),\n      ),\n    )\n  \n    return store\n  }","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport {Provider} from \"react-redux\"\nimport configureStore, { history } from \"./common/store\"\nimport { ConnectedRouter } from 'connected-react-router'\n\nconst store = configureStore()\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <App />\n      </ConnectedRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}