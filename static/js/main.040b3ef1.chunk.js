(this["webpackJsonpwire-web"]=this["webpackJsonpwire-web"]||[]).push([[0],{109:function(e,t,a){e.exports=a(144)},114:function(e,t,a){},115:function(e,t,a){},132:function(e,t){},133:function(e,t){},134:function(e,t){},136:function(e,t){},137:function(e,t){},138:function(e,t){},139:function(e,t){},140:function(e,t){},141:function(e,t){},144:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(12),o=a.n(c),i=(a(114),a(115),a(101)),l=a(69),s=a(190),u=Object(i.a)({palette:{type:"dark",primary:{main:l.a[800]},secondary:s.a}}),m=a(202),h=a(203),g=a(67),f=a(191),b=a(193),d=a(71),p=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(b.a,null,r.a.createElement(d.a,{variant:"h4"},"FaceSearch"))))},w=a(47),v=a.n(w),j=a(74),E=a(41),x=a(195),O=a(10),y=a(194),k=a(196),_=a(197),C=a(205),N=a(199),S=a(198),I=a(200),L=a(201),A=a(206),F=a(145),T=a(100),R=a(40),B=a(0),P=a(68),D=a(97),J=a(98),U=a(103),W=a(34),H=a(104),M=a(102),q=function(e){Object(H.a)(a,e);var t=Object(M.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).value=e.value,n}return Object(J.a)(a,[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"call",value:function(e,t){var a=e;return Array.isArray(a)&&(a=a[0]),this.invokeCallHook(e,t),B.Qb(a,B.pc(this.value))}},{key:"getConfig",value:function(){var e={value:this.value},t=Object(U.a)(Object(W.a)(a.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"className",get:function(){return"HyperScale"}}]),a}(P.a.Layer),Q=function(e,t,a){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},V=Object(x.a)((function(e){return{root:{marginTop:e.spacing(10),textAlign:"center",justifyContent:"center",justifyItems:"center"},imageArea:{marginTop:e.spacing(3),position:"relative",width:"60%"},imageContent:{width:"100%"},overlay:{position:"absolute",top:0,left:0,width:"100%"},resultArea:{marginTop:e.spacing(3)},resultPaper:{padding:e.spacing(3)},croppedImg:{border:"solid",borderWidth:"2px",marginLeft:"15px",margin:"60px"},resultList:{overflow:"auto",position:"relative",backgroundColor:Object(O.c)(e.palette.common.white,.15)},listIconText:{color:"white"}}})),X=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),i=Object(E.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)(null),m=Object(E.a)(u,2),h=m[0],g=m[1],f=Object(n.useState)(null),b=Object(E.a)(f,2),p=b[0],w=b[1],x=Object(n.useState)([]),O=Object(E.a)(x,2),D=O[0],J=O[1],U=V(),W=Object(n.useRef)(null),H=Object(n.useRef)(null),M="https://wiretechnology.net",X="https://www.wiretechnology.net";return Object(n.useEffect)((function(){R.d.ssdMobilenetv1.loadFromUri("./models").then((function(e){console.log("model loaded")}))}),[]),Object(n.useEffect)((function(){B.tc.registerClass(q),Object(P.b)("./tf-keras-facenet/model.json").then((function(e){w(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.root},r.a.createElement(k.a,null,r.a.createElement(T.a,{acceptedFiles:["image/jpeg","image/png","image/bmp"],filesLimit:1,onChange:function(e){if(e.length>0){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(){c(t.result)}}else c(""),g("")}}),r.a.createElement("div",{className:U.imageArea},r.a.createElement("img",{src:a,className:U.imageContent,ref:W,onLoad:function(){var e,t=(e=W.current).height,n={width:e.width,height:t};H.current.height=t,R.c(H.current,n),(e=new Image).src=a,e.onload=Object(j.a)(v.a.mark((function t(){var a,r,c,o,i,l,u,m,h;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.a(e);case 2:for(a=t.sent,r=R.e(a,n),console.log("detections",a,r),c={boxColor:"rgba(255, 255, 255, 1)",label:"Click",drawLabelOptions:{fontColor:"rgba(200, 200, 200, 1)"}},o=[],i=0;i<a.length;i++)l=a[i],u=r[i],m={x:u._box._x,y:u._box._y,width:u._box._width,height:u._box._height},h={x:l._box._x,y:l._box._y,width:l._box._width,height:l._box._height},o.push({box:m,org_box:h}),new R.b.DrawBox(m,c).draw(H.current);s(o);case 9:case"end":return t.stop()}}),t)})))}}),r.a.createElement("canvas",{className:U.overlay,ref:H,onClick:function(e){for(var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,r=0;r<l.length;r++){var c=l[r];if(Q(a,n,c.box)){var o=W.current,i=c.org_box,s=document.createElement("canvas");s.height=i.height,s.width=i.width,s.getContext("2d").drawImage(o,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var u=s.toDataURL();g(u);var m=new Image;m.src=u,m.width=160,m.height=160,m.onload=Object(j.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(B.gd),t=B.y.fromPixels(m),t=(t=B.ab(t,0)).sub(127.5).div(128),e.next=6,p.predict(t);case 6:return a=(a=e.sent).div(B.Vb(a)),e.next=10,a.array();case 10:a=e.sent,n={method:"POST",body:JSON.stringify({vector:a}),headers:{"Content-Type":"application/json; charset=utf-8"}},fetch(M+"/face",n).then((function(e){return e.json()})).then((function(e){console.log("res_json",e),J(e)}));case 13:case"end":return e.stop()}}),e)})))}}}})),h&&r.a.createElement("div",{className:U.resultArea},r.a.createElement(F.a,{className:U.resultPaper},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,xs:3},r.a.createElement("img",{width:80,height:80,className:U.croppedImg,src:h})),r.a.createElement(y.a,{item:!0,xs:9},r.a.createElement(_.a,{className:U.resultList},D.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{key:t,button:!0,component:"a",target:"blank",href:"http://www.wiretechnology.net/index.html?q=".concat(e[0])},r.a.createElement(S.a,null,r.a.createElement(d.a,{className:U.listIconText},t+1,".")),r.a.createElement(N.a,{primary:e[0]}),r.a.createElement(I.a,null,r.a.createElement(A.a,{alt:e[0],src:X+"/image/"+e[2]}))),r.a.createElement(L.a,null))}))))))))))};var Y=function(){return r.a.createElement(m.a,{theme:u},r.a.createElement(h.a,null),r.a.createElement(p,null),r.a.createElement(g.c,null,r.a.createElement(g.a,null,r.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(46),z=a(25),G=a(32),K=a(87),Z=a(43),ee=function(e){return Object(G.c)({router:Object(Z.b)(e)})},te=Object(z.a)();var ae=Object(G.e)(ee(te),Object(G.d)(Object(G.a)(Object(K.a)(te))));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($.a,{store:ae},r.a.createElement(Z.a,{history:te},r.a.createElement(Y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[109,1,2]]]);
//# sourceMappingURL=main.040b3ef1.chunk.js.map