(this["webpackJsonpwire-web"]=this["webpackJsonpwire-web"]||[]).push([[0],{113:function(e,t,a){e.exports=a(148)},118:function(e,t,a){},119:function(e,t,a){},136:function(e,t){},137:function(e,t){},138:function(e,t){},140:function(e,t){},141:function(e,t){},142:function(e,t){},143:function(e,t){},144:function(e,t){},145:function(e,t){},148:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),c=a.n(o),i=(a(118),a(119),a(103)),l=a(69),u=a(194),s=Object(i.a)({palette:{type:"dark",primary:{main:l.a[800]},secondary:u.a}}),m=a(205),h=a(206),g=a(67),d=a(195),p=a(197),f=a(71),b=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{variant:"h4"},"FaceSearch"))))},w=a(48),v=a.n(w),j=a(74),E=a(43),O=a(198),y=a(10),x=a(199),k=a(200),C=a(209),_=a(202),F=a(201),I=a(203),R=a(204),S=a(210),N=a(149),L=a(102),A=a(42),T=a(0),B=a(68),D=a(98),P=a(99),J=a(105),U=a(34),W=a(106),q=a(104),H=function(e){Object(W.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).value=e.value,n}return Object(P.a)(a,[{key:"computeOutputShape",value:function(e){return[e[0],e[1],e[2],e[3]]}},{key:"call",value:function(e,t){var a=e;return Array.isArray(a)&&(a=a[0]),this.invokeCallHook(e,t),T.Qb(a,T.pc(this.value))}},{key:"getConfig",value:function(){var e={value:this.value},t=Object(J.a)(Object(U.a)(a.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"className",get:function(){return"HyperScale"}}]),a}(B.a.Layer),M=function(e,t,a){return e>=a.x&&e<=a.x+a.width&&t>=a.y&&t<=a.y+a.height},Q=Object(O.a)((function(e){return{root:{marginTop:e.spacing(3),textAlign:"center",justifyContent:"center",justifyItems:"center"},imageArea:{marginTop:e.spacing(3),position:"relative",width:"30%"},imageContent:{width:"100%"},overlay:{position:"absolute",top:0,left:0,width:"100%"},resultArea:{marginTop:e.spacing(3)},contentArea:{marginTop:e.spacing(3)},resultPaper:{padding:e.spacing(3)},croppedImg:{border:"solid",borderWidth:"2px",marginLeft:"15px",margin:"60px"},resultList:{overflow:"auto",position:"relative",backgroundColor:Object(y.c)(e.palette.common.white,.15)},listIconText:{color:"white"}}})),V=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),i=Object(E.a)(c,2),l=i[0],u=i[1],s=Object(n.useState)(null),m=Object(E.a)(s,2),h=(m[0],m[1]),g=Object(n.useState)(null),d=Object(E.a)(g,2),p=d[0],b=d[1],w=Object(n.useState)([]),O=Object(E.a)(w,2),y=O[0],D=O[1],P=Q(),J=Object(n.useRef)(null),U=Object(n.useRef)(null),W="https://wiretechnology.net",q="https://www.wiretechnology.net";return Object(n.useEffect)((function(){A.d.ssdMobilenetv1.loadFromUri("./models").then((function(e){console.log("model loaded")}))}),[]),Object(n.useEffect)((function(){T.tc.registerClass(H),Object(B.b)("./tf-keras-facenet/model.json").then((function(e){b(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:P.root},r.a.createElement(x.a,null,r.a.createElement(L.a,{acceptedFiles:["image/jpeg","image/png","image/bmp"],filesLimit:1,onChange:function(e){if(e.length>0){var t=new FileReader;t.readAsDataURL(e[0]),t.onload=function(){o(t.result)}}else o(""),h("")}}),r.a.createElement("div",{className:P.contentArea},r.a.createElement(N.a,null,r.a.createElement("div",{className:P.imageArea},r.a.createElement("img",{src:a,className:P.imageContent,ref:J,onLoad:function(){var e,t=(e=J.current).height,n={width:e.width,height:t};U.current.height=t,A.c(U.current,n),(e=new Image).src=a,e.onload=Object(j.a)(v.a.mark((function t(){var a,r,o,c,i,l,s,m,h;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.a(e);case 2:for(a=t.sent,r=A.e(a,n),console.log("detections",a,r),o={boxColor:"rgba(255, 255, 255, 1)",label:"Click",drawLabelOptions:{fontColor:"rgba(200, 200, 200, 1)"}},c=[],i=0;i<a.length;i++)l=a[i],s=r[i],m={x:s._box._x,y:s._box._y,width:s._box._width,height:s._box._height},h={x:l._box._x,y:l._box._y,width:l._box._width,height:l._box._height},c.push({box:m,org_box:h}),new A.b.DrawBox(m,o).draw(U.current);u(c);case 9:case"end":return t.stop()}}),t)})))}}),r.a.createElement("canvas",{className:P.overlay,ref:U,onClick:function(e){for(var t=e.target.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,r=0;r<l.length;r++){var o=l[r];if(M(a,n,o.box)){var c=J.current,i=o.org_box,u=document.createElement("canvas");u.height=i.height,u.width=i.width,u.getContext("2d").drawImage(c,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var s=u.toDataURL();h(s);var m=new Image;m.src=s,m.width=160,m.height=160,m.onload=Object(j.a)(v.a.mark((function e(){var t,a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(T.gd),t=T.y.fromPixels(m),t=(t=T.ab(t,0)).sub(127.5).div(128),e.next=6,p.predict(t);case 6:return a=(a=e.sent).div(T.Vb(a)),e.next=10,a.array();case 10:a=e.sent,n={method:"POST",body:JSON.stringify({vector:a}),headers:{"Content-Type":"application/json; charset=utf-8"}},fetch(W+"/face",n).then((function(e){return e.json()})).then((function(e){console.log("res_json",e),D(e)}));case 13:case"end":return e.stop()}}),e)})))}}}})),r.a.createElement(k.a,{className:P.resultList},y.map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{key:t,button:!0,component:"a",href:"https://www.wiretechnology.net/index.html?q=".concat(e[0])},r.a.createElement(F.a,null,r.a.createElement(f.a,{className:P.listIconText},t+1,".")),r.a.createElement(_.a,{primary:e[0]}),r.a.createElement(I.a,null,r.a.createElement(S.a,{alt:e[0],src:q+"/image/"+e[2]}))),r.a.createElement(R.a,null))}))))))))},X=a(78),Y=a(35),$=a(207),z=a(101),G=a.n(z),K=Object(O.a)((function(e){return{root:{marginTop:e.spacing(10),width:"100%"},search:Object(X.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(y.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(y.c)(e.palette.common.white,.25)},marginLeft:"auto",marginRight:"auto",width:"100%"},e.breakpoints.up("sm"),{width:"60%",marginLeft:"auto",marginRight:"auto"}),searchIcon:{width:e.spacing(7),color:"#FFF",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(X.a)({padding:e.spacing(1,1,1,7),color:"#FFF",width:"100%"},e.breakpoints.up("sm"),{width:"100%"})}})),Z=Object(Y.c)()((function(e){e.dispatch;var t,a=K();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.root},r.a.createElement(x.a,null,r.a.createElement(p.a,null,r.a.createElement("div",{className:a.search},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=t.value;t.value="",document.location.href="https://www.wiretechnology.net/index.html?q="+a}},r.a.createElement("div",{className:a.searchIcon},r.a.createElement(G.a,null)),r.a.createElement($.a,{placeholder:"Search...",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},inputRef:function(e){t=e}})))))))}));var ee=function(){return r.a.createElement(m.a,{theme:s},r.a.createElement(h.a,null),r.a.createElement(b,null),r.a.createElement(Z,null),r.a.createElement(g.c,null,r.a.createElement(g.a,null,r.a.createElement(V,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(26),ae=a(32),ne=a(88),re=a(36),oe=function(e){return Object(ae.c)({router:Object(re.b)(e)})},ce=Object(te.a)();var ie=Object(ae.e)(oe(ce),Object(ae.d)(Object(ae.a)(Object(ne.a)(ce))));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y.a,{store:ie},r.a.createElement(re.a,{history:ce},r.a.createElement(ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[113,1,2]]]);
//# sourceMappingURL=main.29b0b61f.chunk.js.map